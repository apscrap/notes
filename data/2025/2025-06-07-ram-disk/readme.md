# RAM-диски в деле спасения SSD

В последнее время цены на качественные SSD-диски улетели куда-то в далёкий космос, поэтому как никогда остро встаёт вопрос сохранения их ресурса.

Общие шаги, которые обычно предпринимает каждый опытный пользователь:

**1.** Использование специальных утилит для настройки использования SSD, таких как [SSD Mini Tweaker](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/ssd_mini_tweaker_2.5.7z).

[![Screenshot](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/ssd_mini_tweaker_mini.png)](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/ssd_mini_tweaker.png)

**2.** Отключение файла подкачки в операционной системе:

`Панель управления` -> `Система` -> `Дополнительные параметры системы` -> `Быстродействие` -> `Дополнительно` -> `Виртуальная память`


**3.** Настройка браузера на использование оперативной памяти вместо SSD для кеширования данных. Например, для **Firefox** в `about:config` выставляются следующие значения параметров:

- [x] `browser.cache.disk.enable` -> `false`
- [x] `browser.cache.memory.enable` -> `true`
- [x] `browser.cache.memory.capacity` -> `-1`
- [x] `browser.cache.offline.enable` -> `false`
- [x] `browser.cache.offline.storage.enable` -> `false`
- [x] `browser.sessionstore.interval` -> `15000000`

Однако интенсивная работа с компьютером обычно сопряжена с огромным количеством циклов записи на SSD: временные файлы, промежуточные копирования, традиционные телодвижения в духе «скачал-посмотрел-удалил-забыл». Мегабайты превращаются в гигабайты, гигабайты пухнут до терабайтов — и всё это расход ресурса SSD вхолостую.

Проблема решается использованием излишков оперативной памяти для создания виртуального RAM-диска, который операционная система будет считать одним из обычных жёстких дисков.

Рассмотрим два замечательных бесплатных решения, которые подойдут каждому. Обе программы потребуют установки специальных драйверов, поэтому на запрос системы об их установке нужно согласиться.

> [!CAUTION]
> Сразу оговорюсь, что все ссылки приоритетно указаны на проверенные дистрибутивы, а не на официальные сайты, потому что в эпоху роллинг-релизов и капризов разработчиков из серии «*удалю-ка я все ссылки на старые версии — пущай переходят на последнюю*» лично меня уже порядком задолбали, да и через N лет выправлять все ссылки вручную будет удовольствием ниже среднего.
>
> Верить мне на слово не надо, поэтому обязательно проверяйте все файлы антивирусами, например, онлайн-сервисами [Dr.Web](https://vms.drweb.ru/scan_file/), [Kaspersky](https://opentip.kaspersky.com), [VirusTotal](https://www.virustotal.com/gui/home/upload). И в целом следите за цифровой гигиеной — дело это богоугодное.

## AMD Radeon RAMDisk 

**[AMD Radeon RAMDisk 4.4.0.36](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/amd_radeon_ramdisk_4.4.0.rc36.7z)** — утилита, позволяющая создавать RAM-диск объёмом до `4 Гб`, чего с запасом хватит для папки временных файлов операционной системы и сохранения файлов из интернетов.

К сожалению, с официального сайта AMD убрали ссылку на скачивание данной программы, но она всё еще доступна в сети. 
> [!CAUTION]
> При скачивании файла из альтернативных источников проверяйте оригинальную цифровую подпись и контрольную сумму `SHA-256` установочного файла `Radeon_RAMDisk_4_4_0_RC36.msi`: `D792733F0EBC8C30D7F6778C9F0276CD5FBDE7419212D0B338744B0311D38970`.

> [!TIP]
> Вычислить контрольную сумму `SHA-256` можно с помощью бесплатного hex-редактора [HxD](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/hxd_2.5.0.7z) в меню `Analysis` -> `Checksums` -> `SHA-256`.
> 
> [Сайт разработчика](https://mh-nexus.de/en/hxd/) утилиты HxD.

Особенно удобно, что утилита от AMD умеет создавать RAM-диск во время загрузки системы, и остаётся только прописать нужный путь к папке `TEMP` в переменную `PATH`:

`Панель управления` -> `Система` -> `Дополнительные параметры системы` -> `Переменные среды` -> `Системные переменные` -> `PATH`

Для работы RAM-диска потребуется **однократно** создать на одном из физических дисков специальный файл с расширением `.img`, который будет служить прообразом для нашего нового RAM-диска. При этом на вкладке `Load/Save` нужно отключить опцию `Save Disk Image At Shutdown`, а также на вкладке `Options` включить опцию `Do not create backup file when saving disk image`.

[![Screenshot](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/amd_ram_disk_settings_mini.png)](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/amd_ram_disk_settings.png)
[![Screenshot](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/amd_ram_disk_load_save_mini.png)](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/amd_ram_disk_load_save.png)
[![Screenshot](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/amd_ram_disk_options_mini.png)](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/amd_ram_disk_options.png)

## Miray RAM Drive 

**[Miray RAM Drive 1.3.5](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/mrd_ram_drive_1.3.5.7z)** — утилита, позволяющая создавать RAM-диск объёмом до `8 Гб`, но в бесплатной редакции не позволяющая создавать диск автоматически при загрузке ОС. [Страница программы](https://www.miray-software.com/download/miray-ram-drive.html) на сайте разработчика.
> [!CAUTION]
> При скачивании файла из альтернативных источников проверяйте оригинальную цифровую подпись и контрольную сумму `SHA-256` установочного файла `MRD.1.3.5.en.Setup.exe`: `04AC0C5E7CA9A877E04652C639D2476617572E534664CA33BFF7F25F45E9CE5B`.

Использование программы совсем несложное: при запуске появится окно выбора требуемого объёма RAM-диска, после чего он появится в системе под какой-то буквой, например `H:`.

[![Screenshot](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/miray_ram_drive_mini.png)](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/miray_ram_drive.png)

## Дополнительные мероприятия

Если проанализировать с помощью утилит типа [Process Hacker](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/process_hacker_2.39.7z) обращения некоторых программ к дискам, можно зафиксировать крайне неприятный факт: многие из них непрерывно что-то записывают в соответствующие пользовательские папки в `%APPDATA%`. И это не какие-то крохи, но десятки, а иногда даже сотни мегабайт в час. Например, этим с удовольствием занимается браузер **Firefox**.

При достаточном уровне самодисциплины можно применить следующий подход:

+ Создать новый профиль пользователя в `about:profiles` и разместить его по адресу нашего RAM-диска, например, `R:\firefox_user\`.
+ Полностью настроить всё необходимое в данном профиле: оформление, расширения, закладки и т.д.
+ Удалить все остальные профили, если они есть.
+ Полностью почистить кэш, историю и т.д.
+ Залогиниться на всех сайтах первой необходимости: почта, соцсети и т.д.
+ Снова почистить кэш и историю, но не трогать `Cookies`, `Active logins`, `Site settings` и `Offline website data`.
+ Запаковать c помощью архиватора [7-Zip](https://www.7-zip.org/) папку настроенного профиля `firefox_user` и положить получившийся архив `firefox_user.7z` в любое удобное место на SSD.
+ Создать bat-файл, с помощью которого содержимое архива будет распаковываться на RAM-диск.
+ Готово. Теперь и браузер, и система будут работать с пользовательской папкой на RAM-диске, а не на SSD.

> [!TIP]
> Содержимое bat-файла: указываем путь к архиватору, указываем путь к архиву с профилем, указываем путь для распаковки.
> ```
> @echo off
>
> "c:\Program Files\7-Zip\7z.exe" x "D:\Firefox\firefox_user.7z" -o"R:\" -y
> ```
> Ярлык на bat-файл можно закинуть в автозагрузку — и вуаля.
> Интересно также, что мой **Firefox 115.20.0esr** при отсутствии папки пользователя даже не может загрузиться и выдаёт ошибку. В крайнем случае можно просто создать пустую папку с необходимым именем пользователя, и тогда браузер загрузится с дефолтными настройками.

Проверяем схему на работоспособность: браузер теперь взаимодействует с пользовательской папкой `R:\firefox_user\` на RAM-диске.

[![Screenshot](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/disk_write_mini.png)](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/pic/disk_write.png)

Конечно, про самодисциплину я завёл разговор неспроста: теперь все изменения в профиле действуют только в рамках текущего состояния папки пользователя на RAM-диске, поэтому все новые закладки, расширения и настройки пропадут. И тут можно либо раз в неделю обновлять состояние профиля по ранее указанной схеме, фиксируя напоминания о необходимых изменениях в специально отведённом текстовом документике, либо одно из двух. Мой опыт показывает, что это значительно менее сложно, чем может показаться на первый взгляд, и просто требует формирования привычки.

Примерно по такой же схеме можно поступить с portable-версией **Telegram**, разве что манипуляции будут производиться не с папкой профиля, а с самой папкой телеги.

## Полезные утилиты

[Victoria 5.37](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/victoria_5.37.7z) — самая известная утилита диагностики HDD и SSD ([сайт программы](https://hdd.by/victoria/)).

[CrystalDiskInfo 9.5.0](https://github.com/apscrap/data-01/blob/main/2025-06-07-ram-disk/files/crystal_disk_info_9.5.0.7z) — полезная программа мониторинга и анализа работы SSD ([сайт программы](https://crystalmark.info/en/download/)).
